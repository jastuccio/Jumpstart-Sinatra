code samples available at https://github.com/spbooks/SINATRA1